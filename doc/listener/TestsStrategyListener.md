# TestsStrategyListener

<a name="config-and-requirements"></a>

*See [PhpUnit configuration reference](https://phpunit.de/manual/current/en/appendixes.configuration.html) and [PhpUnit Risky tests](https://phpunit.de/manual/current/en/risky-tests.html) for more information about a specific option*

`TestsStrategyListener` will allow test type conversion and coverage removal

<a name="required-config"></a>
## Required configuration

```xml
<phpunit>
  <listeners>
        <listener class="Yoanm\PhpUnitExtended\Listener\TestsStrategyListener"/>
  </listeners>
</phpunit>
```

## In the box

<a name="in-the-box-risky-to-failed"></a>
### Convert risky test into failed test

Listener will add a failure for each risky test listed below

<a name="in-the-box-risky-to-failed-risky-test-test-with-output"></a>
#### Test that output something

 * [Listener configuration](#required-config)
 * Add `beStrictAboutOutputDuringTests="true"` in the configuration file or use `--disallow-test-output` command line option

<a name="in-the-box-risky-to-failed-risky-test-test-tests-nothing"></a>
#### Test that do not test anything

 * [Listener configuration](#required-config)
 * Add `beStrictAboutTestsThatDoNotTestAnything="true"` in the configuration file or use `--report-useless-tests` command line option

<a name="in-the-box-risky-to-failed-risky-test-test-manipulates-globals"></a>
#### Test that manipulates globals

 * [Listener configuration](#required-config)
 * Add `beStrictAboutChangesToGlobalState="true"` in the configuration file or use `--strict-global-state` command line option

<a name="in-the-box-risky-to-failed-risky-test-test-manipulates-globals-variables"></a>
##### For globals variables

 * [Requirements described above](#in-the-box-risky-to-failed-risky-test-test-manipulates-globals)
 * Add `backupGlobals="true"` in the configuration file or add `@backupGlobals enabled` in the test

<a name="in-the-box-risky-to-failed-risky-test-test-manipulates-globals-attributes"></a>
##### For static attributes

 * [Requirements described above](#in-the-box-risky-to-failed-risky-test-test-manipulates-globals)
 * Add `backupStaticAttributes="true"` in the configuration file or add `@backupStaticAttributes enabled` in the test

<a name="in-the-box-risky-to-failed-risky-test-test-with-coverage-overflow"></a>
#### Test that have coverage overflow

 * [Listener configuration](#required-config)
 * Add `checkForUnintentionallyCoveredCode="true"` in the configuration file or use `--strict-coverage` command line option
 * Add `forceCoversAnnotation="true"` in the configuration file

<a name="in-the-box-remove-coverage-risky-output"></a>
### Remove coverage generated by a risky test that have an output

 * [Listener configuration](#required-config)
 * Add `beStrictAboutOutputDuringTests="true"` in the configuration file or use `--disallow-test-output` command line option
